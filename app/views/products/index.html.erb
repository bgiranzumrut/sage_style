<% content_for :title, "Products" %>

<h1 class="page-title">All Products</h1>

<!-- Filter Buttons -->
<div class="filters text-center mb-4">
  <%= link_to "All Products", products_path, class: "btn-see-all mx-2" %>
  <%= link_to "On Sale", products_path(filter: "on_sale"), class: "btn-see-all mx-2" %>
  <%= link_to "New", products_path(filter: "new"), class: "btn-see-all mx-2" %>
  <%= link_to "Recently Updated", products_path(filter: "recently_updated"), class: "btn-see-all mx-2" %>
</div>

<% if @products.any? %>
  <!-- Product Grid -->
  <div class="product-grid">
    <% @products.each do |product| %>
      <div class="product-card">
        <h5><%= product.name %></h5>

        <% if product.image.attached? %>
          <%= image_tag product.image.variant(resize_to_limit: [250, 250]), alt: product.name %>
        <% end %>

        <p class="product-price">$<%= product.price %></p>
        <%= link_to "See Details", product_path(product), class: "product-details-btn" %>
      </div>
    <% end %>
  </div>

  <!-- Pagination -->
  <div class="d-flex justify-content-center mt-4">
    <%= paginate @products %>
  </div>
<% else %>
  <!-- No Products Found Message -->
  <div class="text-center mt-5">
    <h4>No products found.</h4>
    <%= link_to 'Back to All Products', products_path, class: 'btn btn-outline-dark mt-3' %>
  </div>
<% end %>
